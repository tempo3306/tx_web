{% extends 'includes/forum_base.html' %}

{% block title %}全部版块{% endblock %}
{% block breadcrumb %}
    <div class="container" style="margin-top: 10px">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item active" aria-current="page">首页</li>
            </ol>
        </nav>
    </div>
{% endblock %}
{% block content %}
    <main role="main" class="container">
        {#        <div class="d-flex align-items-center p-3 my-3 text-white-50 bg-purple rounded box-shadow">#}
        {#            <img class="mr-3" src="/media/system_image/logo.jpeg" alt="logo" width="48" height="48">#}
        {#            <div class="lh-100">#}
        {#                <h6 class="mb-0 text-white lh-100">Bootstrap</h6>#}
        {#                <small>Since 2011</small>#}
        {#            </div>#}
        {#        </div>#}

        <div class="my-3 p-3 bg-white rounded box-shadow">
            <h6 class="border-bottom border-gray pb-2 mb-0">热门版块</h6>

            {% for board in boards %}

                <div class="media text-muted pt-3" style="align-items: flex-start">
                    <img src="/media/{{ board.board_headimage }}" alt="图像" class="mr-2 rounded" width="42" height="42">

                    <p class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
                        <strong class="d-block text-gray-dark"><a
                                href="{{ board.get_absolute_url }}"> {{ board.name }}</a></strong>
                        {{ board.description }}
                    </p>
                    <button type="button" class="btn btn-primary">
                        Profile <span class="badge badge-light">{{ board.get_posts_count }}</span>
                        <span class="sr-only">New</span>
                    </button>

                </div>


            {% endfor %}

            <small class="d-block text-right mt-3">
                <a href="#">更多</a>
            </small>
        </div>

        <div class="my-3 p-3 bg-white rounded box-shadow">


            <h6 class="border-bottom border-gray pb-2 mb-0">热帖</h6>
            {% for topic in topics %}
                <div class="media text-muted pt-3">
                    <img src="/media/{{ topic.starter.forum_user.photo }}" alt="头像" class="mr-2 rounded">
                    <div class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
                        <div class="d-flex justify-content-between align-items-center w-100">
                            <strong class="text-gray-dark">
                                <a href="{{ topic.get_absolute_url }}">
                                    {{ topic.subject }}
                                </a>
                            </strong>
                            <a href="#">回复</a>
                        </div>
                        <span class="d-block">by {{ topic.starter.forum_user.nickname }}</span>
                    </div>
                </div>
            {% endfor %}

            <small class="d-block text-right mt-3">
                <a href="#">更多</a>
            </small>
        </div>
    </main>




    {##}
    {#    <div class="container">#}
    {##}
    {#        <table class="table">#}
    {#            <thead class="thead">#}
    {#            <tr>#}
    {#                <th>版块</th>#}
    {#                <th>帖子</th>#}
    {#                <th>主题</th>#}
    {#                <th>最后发表</th>#}
    {#            </tr>#}
    {#            </thead>#}
    {#            <tbody>#}
    {#            {% for board in object_list %}#}
    {#                <tr>#}
    {#                    <td>#}
    {#                        <a href="{% url 'board_topics' board.name %}">#}
    {#                            {{ board.name }}#}
    {#                        </a>#}
    {#                        <small class="text-muted d-block" style="font-size:75%">#}
    {#                            {{ board.description }}#}
    {#                        </small>#}
    {#                    </td>#}
    {#                    <td class="align-middle">{{ board.get_posts_count }}</td>#}
    {#                    <td class="align-middle">{{ board.topics.count }}</td>#}
    {#                    <td class="align-middle">#}
    {#                        {% with post=board.get_last_post %}#}
    {#                            {% if post %}#}
    {#                                <small>#}
    {#                                    <a href="{% url 'topic_posts' board.name post.topic.pk %}">#}
    {#                                        {{ post.created_by.username }} 创建于 {{ post.created_at }}#}
    {#                                    </a>#}
    {#                                </small>#}
    {#                            {% else %}#}
    {#                                <small class="text-muted">#}
    {#                                    <em>还没有任何帖子</em>#}
    {#                                </small>#}
    {#                            {% endif %}#}
    {#                        {% endwith %}#}
    {#                    </td>#}
    {#                </tr>#}
    {#            {% endfor %}#}
    {#            </tbody>#}
    {#        </table>#}
    {#    </div>#}

{% endblock %}
